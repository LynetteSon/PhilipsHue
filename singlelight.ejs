<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../head %>
</head>
<body class="container">
    <main>
    <script>
        
        $(document).ready(function() {
            $('#btn').on('click', function() {
                var lightid = $("#lightid").text();
                var res = lightid.split(" ");
                var id = res[2];
                var onstate = $("input[type=radio]:checked").val();
                if (onstate == 'false') {
                    onstate = false;
                } else {
                    onstate = true;
                }
                var bright = $("input[type=range]").val();
                bright = parseInt(bright);
                
                var body = {
                    "on" : onstate,
                    "bri": bright
                }
                $.ajax({
                    type: 'POST',
                    url: '/lights/' + id,
                    data: JSON.stringify({ data: body }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(resultData) {
                        //console.log(resultData);
                    }
                });
            });

            $('#Strongbtn').on('click', function() {
                var lightid = $("#lightid").text();
                var res = lightid.split(" ");
                var id = res[2];
                var body = {
                    "on" : true,
                    "bri": 254
                }
                $.ajax({
                    type: 'POST',
                    url: '/lights/' + id,
                    data: JSON.stringify({ data: body }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(resultData) {
                        //console.log(resultData);
                    }
                });
            });
            $('#Mediumbtn').on('click', function() {
                var lightid = $("#lightid").text();
                var res = lightid.split(" ");
                var id = res[2];
                var body = {
                    "on" : true,
                    "bri": 150
                }
                $.ajax({
                    type: 'POST',
                    url: '/lights/' + id,
                    data: JSON.stringify({ data: body }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(resultData) {
                        //console.log(resultData);
                    }
                });
            });
            $('#Lightbtn').on('click', function() {
                var lightid = $("#lightid").text();
                var res = lightid.split(" ");
                var id = res[2];
                var body = {
                    "on" : true,
                    "bri": 50
                }
                $.ajax({
                    type: 'POST',
                    url: '/lights/' + id,
                    data: JSON.stringify({ data: body }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(resultData) {
                        //console.log(resultData);
                    }
                });
            });


        });
        function foo() {
            alert("Submit button clicked!");
        }
        
    </script>
        <%- include('../light.ejs', {data: lightinfo}); %>
        <div class="container">
            <div class="jumbotron">
            <div class="row">
                <div class="col-md-6">
                    <h2> Power On Off </h2>
                    <form>
                        <input type="radio" name="state" value="true" checked> <label> On </label> <br>
                        <input type="radio" name="state" value="false"> <label> Off </label> <br><br>

                        <br>
                        <!--<input type="submit" value="Submit" onclick="foo()">-->
                        <input id="btn" type="submit" value="Submit" class="btn btn-primary" >
                    </form>
                </div>
           
                <div class="col-md-6">
                    <h2> Brightness </h2>
                    <br>
                    <form>
                        <input id="Strongbtn" type="submit" value="Strong" class="btn btn-success" >
                        <br> <br>
                        <input id="Mediumbtn" type="submit" value="Medium" class="btn btn-info" >
                        <br> <br>
                        <input id="Lightbtn" type="submit" value="Light" class="btn btn-warning" >
                    </form>
                </div>
            </div>
            </div>
        </div>
    </main>
    
</body>
</html>